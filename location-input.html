<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Enter your location and property details for personalized rooftop rainwater harvesting assessment.">
  <title>Location & Details - Rooftop Rainwater Harvesting</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link href="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.css" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* Enhanced animations and effects from onboarding page */
    @keyframes slideInFromLeft {
      from { opacity: 0; transform: translateX(-30px); }
      to { opacity: 1; transform: translateX(0); }
    }
    
    @keyframes slideInFromRight {
      from { opacity: 0; transform: translateX(30px); }
      to { opacity: 1; transform: translateX(0); }
    }
    
    @keyframes fadeInScale {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
    
    .animate-slideInLeft { animation: slideInFromLeft 0.6s ease-out forwards; }
    .animate-slideInRight { animation: slideInFromRight 0.6s ease-out forwards; }
    .animate-fadeInScale { animation: fadeInScale 0.5s ease-out forwards; }
    
    /* Enhanced gradient background matching onboarding */
    body {
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 25%, #334155 50%, #475569 75%, #64748b 100%);
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }
    
    /* Background particles */
    .bg-particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }
    
    .particle {
      position: absolute;
      background: rgba(34, 211, 238, 0.1);
      border-radius: 50%;
      animation: float 6s ease-in-out infinite;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      33% { transform: translateY(-20px) rotate(120deg); }
      66% { transform: translateY(-10px) rotate(240deg); }
    }
    
    /* Glass morphism effects */
    .glass-card {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 25px 45px rgba(0, 0, 0, 0.1);
    }
    
    .glass-input {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: white;
      transition: all 0.3s ease;
    }
    
    .glass-input:focus {
      background: rgba(255, 255, 255, 0.15);
      border-color: rgba(34, 211, 238, 0.5);
      outline: none;
      box-shadow: 0 0 20px rgba(34, 211, 238, 0.1);
    }
    
    .glass-input::placeholder { color: rgba(255, 255, 255, 0.6); }
    
    .glass-button {
      background: rgba(34, 211, 238, 0.2);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(34, 211, 238, 0.3);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .glass-button:hover {
      background: rgba(34, 211, 238, 0.3);
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(34, 211, 238, 0.2);
    }
    
    .glass-button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }
    
    /* Map container styling */
    #map {
      height: 400px;
      width: 100%;
      border-radius: 12px;
      border: 1px solid rgba(34, 211, 238, 0.3);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }
    
    /* Progress indicator */
    .progress-indicator {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 50px;
    }
    
    .progress-step {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transition: all 0.3s ease;
    }
    
    .progress-step.active {
      background: #22d3ee;
      box-shadow: 0 0 15px rgba(34, 211, 238, 0.5);
    }
    
    .progress-step.completed {
      background: #10b981;
      box-shadow: 0 0 15px rgba(16, 185, 129, 0.5);
    }
    
    /* Suggestions dropdown */
    .suggestions {
      position: absolute;
      background: rgba(30, 41, 59, 0.95);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(34, 211, 238, 0.3);
      border-radius: 8px;
      max-height: 200px;
      overflow-y: auto;
      width: 100%;
      z-index: 1000;
      top: 100%;
    }
    
    .suggestion-item {
      padding: 12px;
      cursor: pointer;
      color: white;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      transition: background 0.2s ease;
    }
    
    .suggestion-item:hover {
      background: rgba(34, 211, 238, 0.2);
    }
    
    /* Section navigation */
    .section {
      display: none;
      opacity: 0;
    }
    
    .section.active {
      display: block;
      animation: fadeInScale 0.5s ease-out forwards;
    }
    
    /* Form styling */
    .form-group {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 1rem;
    }
    
    .section-title {
      color: #22d3ee;
      font-size: 1.5rem;
      font-weight: bold;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    /* Radio button styling */
    .radio-group {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-top: 0.5rem;
    }
    
    .radio-option {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      padding: 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
    }
    
    .radio-option:hover {
      background: rgba(34, 211, 238, 0.1);
      border-color: rgba(34, 211, 238, 0.3);
    }
    
    .radio-option.selected {
      background: rgba(34, 211, 238, 0.2);
      border-color: rgba(34, 211, 238, 0.5);
    }
    
    .radio-option input[type="radio"] {
      display: none;
    }
    
    .radio-option .icon {
      font-size: 2rem;
      color: #22d3ee;
      margin-bottom: 0.5rem;
    }
    
    /* Text colors */
    .text-primary { color: #22d3ee; }
    .text-secondary { color: rgba(255, 255, 255, 0.8); }
    .text-muted { color: rgba(255, 255, 255, 0.6); }
    
    /* Area calculator */
    .area-calculator {
      background: rgba(34, 211, 238, 0.1);
      border: 1px solid rgba(34, 211, 238, 0.2);
      border-radius: 8px;
      padding: 1rem;
      margin-top: 0.5rem;
    }
    
    /* Navigation buttons */
    .nav-buttons {
      display: flex;
      justify-content: space-between;
      gap: 1rem;
      margin-top: 2rem;
    }
    
    @media (max-width: 768px) {
      .nav-buttons {
        flex-direction: column;
      }
    }
  </style>
  <style>
    .glass-input option {
      color: #1f2937; /* Dark text for light dropdown background */
    }
  </style>
</head>
<body>
  <!-- Background particles -->
  <div class="bg-particles" id="particles"></div>
  
  <!-- Header -->
  <header class="relative z-10 container mx-auto px-4 py-6 flex justify-between items-center">
    <img src="https://via.placeholder.com/180x60/22d3ee/ffffff?text=RTRWH+Logo" alt="Rooftop Rainwater Harvesting Logo" class="h-12 transition-transform duration-300 hover:scale-105">
    
    <div class="flex items-center space-x-4">
      <!-- Progress indicator -->
      <div class="progress-indicator px-4 py-2 flex items-center space-x-2">
        <div class="progress-step completed" title="Authentication"></div>
        <div class="progress-step completed" title="Awareness"></div>
        <div class="progress-step active" title="Data Collection"></div>
        <div class="progress-step" id="step4" title="Assessment"></div>
      </div>
      
      <!-- Language selector -->
      <select class="glass-input rounded-lg px-3 py-2 text-sm" id="languageSelect">
        <option value="en">English</option>
        <option value="hi">हिंदी</option>
        <option value="ta">தமிழ்</option>
        <option value="te">తెలుగు</option>
        <option value="bn">বাংলা</option>
        <option value="gu">ગુજરાતી</option>
        <option value="kn">ಕನ್ನಡ</option>
        <option value="ml">മലയാളം</option>
      </select>
    </div>
  </header>

  <!-- Main Content -->
  <main class="relative z-10 container mx-auto px-4 py-8 max-w-6xl">
    
    <!-- Location Input Section -->
    <section id="locationSection" class="section active">
      <div class="text-center mb-8 animate-fadeInScale">
        <h1 class="text-4xl lg:text-5xl font-bold text-white mb-4">
          Let's Find Your
          <span class="text-primary">Location</span>
        </h1>
        <p class="text-secondary text-lg max-w-2xl mx-auto">
          Provide your location manually, select it on the interactive map, or use GPS for precise assessment.
        </p>
      </div>
      
      <div class="grid lg:grid-cols-2 gap-8">
        <!-- Location Form -->
        <div class="glass-card rounded-2xl p-8 animate-slideInLeft">
          <h2 class="section-title">
            <i class="fas fa-map-marker-alt"></i>
            Location Details
          </h2>
          
          <div class="space-y-4">
            <div class="relative">
              <label class="block text-sm font-medium text-secondary mb-2">Address or Pin Code</label>
              <input type="text" id="address" placeholder="e.g., Connaught Place, Delhi" 
                     class="glass-input w-full px-4 py-3 rounded-lg">
              <div id="suggestions" class="suggestions hidden"></div>
            </div>
            
            <div class="grid grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-secondary mb-2">Pin Code</label>
                <input type="text" id="pincode" placeholder="Auto-filled" 
                       class="glass-input w-full px-4 py-3 rounded-lg">
              </div>
              <div>
                <label class="block text-sm font-medium text-secondary mb-2">State</label>
                <select id="state" class="glass-input w-full px-4 py-3 rounded-lg">
                  <option value="">Select State</option>
                </select>
              </div>
            </div>
            
            <div class="grid grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-secondary mb-2">District</label>
                <input type="text" id="district" placeholder="Auto-filled" 
                       class="glass-input w-full px-4 py-3 rounded-lg">
              </div>
              <div>
                <label class="block text-sm font-medium text-secondary mb-2">Town/Village</label>
                <input type="text" id="town" placeholder="Auto-filled" 
                       class="glass-input w-full px-4 py-3 rounded-lg">
              </div>
            </div>
            
            <div class="grid grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-secondary mb-2">Latitude</label>
                <input type="number" id="latitude" step="any" placeholder="e.g., 28.6139" 
                       class="glass-input w-full px-4 py-3 rounded-lg" required>
              </div>
              <div>
                <label class="block text-sm font-medium text-secondary mb-2">Longitude</label>
                <input type="number" id="longitude" step="any" placeholder="e.g., 77.2090" 
                       class="glass-input w-full px-4 py-3 rounded-lg" required>
              </div>
            </div>
            
            <div class="flex flex-wrap gap-3 mt-6">
              <button type="button" id="geolocation" 
                      class="glass-button px-6 py-3 rounded-lg text-white font-medium flex items-center space-x-2">
                <i class="fas fa-crosshairs"></i>
                <span>Use My Location</span>
              </button>
            </div>
          </div>
        </div>
        
        <!-- Map Container -->
        <div class="animate-slideInRight">
          <div class="glass-card rounded-2xl p-6">
            <div class="flex justify-between items-center mb-4">
              <h3 class="text-lg font-semibold text-white flex items-center">
                <i class="fas fa-globe-asia text-primary mr-2"></i>
                Interactive Map
              </h3>
              <div id="map-style-toggle" class="flex items-center space-x-2 text-sm">
                <span class="text-gray-300 transition-colors duration-200">Streets</span>
                <label for="view-toggle" class="relative inline-flex items-center cursor-pointer">
                  <input type="checkbox" id="view-toggle" class="sr-only peer" checked>
                  <div class="w-11 h-6 bg-gray-600 rounded-full peer peer-focus:ring-2 peer-focus:ring-cyan-500 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-cyan-600"></div>
                </label>
                <span class="text-white font-semibold transition-colors duration-200">Satellite</span>
              </div>
            </div>
            <div id="map"></div>
            <p class="mt-3 text-sm text-muted">
              <i class="fas fa-info-circle mr-1"></i>
              Click on the map or drag the marker to set location
            </p>
            <p class="text-sm text-primary" id="coords">Latitude: 0, Longitude: 0</p>
          </div>
        </div>
      </div>
      
      <div class="nav-buttons">
        <button class="glass-button px-8 py-3 rounded-lg text-white font-medium" onclick="goBack()">
          <i class="fas fa-arrow-left mr-2"></i>
          Back
        </button>
        <button class="glass-button px-8 py-3 rounded-lg text-white font-medium" onclick="nextSection()" id="locationNext">
          Continue to Details
          <i class="fas fa-arrow-right ml-2"></i>
        </button>
      </div>
    </section>
    
    <!-- Data Collection Section -->
    <section id="dataSection" class="section">
      <div class="text-center mb-8 animate-fadeInScale">
        <h1 class="text-4xl lg:text-5xl font-bold text-white mb-4">
          Tell Us About Your
          <span class="text-primary">Property</span>
        </h1>
        <p class="text-secondary text-lg max-w-2xl mx-auto">
          Help us provide accurate recommendations by sharing details about your property and requirements.
        </p>
      </div>
      
      <div class="grid lg:grid-cols-2 gap-8">
        <!-- Basic Details -->
        <div class="space-y-6">
          <div class="form-group animate-slideInLeft">
            <h3 class="section-title">
              <i class="fas fa-user"></i>
              Basic Details
            </h3>
            
            <div class="space-y-4">
              <div>
                <label class="block text-sm font-medium text-secondary mb-2">Full Name</label>
                <input type="text" id="fullName" placeholder="Enter your full name" 
                       class="glass-input w-full px-4 py-3 rounded-lg">
              </div>
              
              <div>
                <label class="block text-sm font-medium text-secondary mb-2">Contact Number</label>
                <input type="tel" id="contactNumber" placeholder="Enter mobile number" 
                       class="glass-input w-full px-4 py-3 rounded-lg">
              </div>
              
              <div>
                <label class="block text-sm font-medium text-secondary mb-2">Household Size</label>
                <select id="householdSize" class="glass-input w-full px-4 py-3 rounded-lg">
                  <option value="">Select household size</option>
                  <option value="1-2">1-2 people</option>
                  <option value="3-4">3-4 people</option>
                  <option value="5-6">5-6 people</option>
                  <option value="7-10">7-10 people</option>
                  <option value="10+">More than 10 people</option>
                </select>
              </div>
            </div>
          </div>
          
          <!-- Water Sources -->
          <div class="form-group animate-slideInLeft" style="animation-delay: 0.2s;">
            <h3 class="section-title">
              <i class="fas fa-tint"></i>
              Existing Water Sources
            </h3>
            
            <div class="space-y-3">
              <label class="flex items-center space-x-3 cursor-pointer">
                <input type="checkbox" class="rounded border-gray-600" value="municipal">
                <span class="text-secondary">Municipal Water Supply</span>
              </label>
              <label class="flex items-center space-x-3 cursor-pointer">
                <input type="checkbox" class="rounded border-gray-600" value="borewell">
                <span class="text-secondary">Borewell/Tube Well</span>
              </label>
              <label class="flex items-center space-x-3 cursor-pointer">
                <input type="checkbox" class="rounded border-gray-600" value="well">
                <span class="text-secondary">Open Well</span>
              </label>
              <label class="flex items-center space-x-3 cursor-pointer">
                <input type="checkbox" class="rounded border-gray-600" value="tanker">
                <span class="text-secondary">Water Tanker</span>
              </label>
              <label class="flex items-center space-x-3 cursor-pointer">
                <input type="checkbox" class="rounded border-gray-600" value="other">
                <span class="text-secondary">Other Sources</span>
              </label>
            </div>
          </div>
        </div>
        
        <!-- Property Details -->
        <div class="space-y-6">
          <div class="form-group animate-slideInRight">
            <h3 class="section-title">
              <i class="fas fa-home"></i>
              Property Details
            </h3>
            
            <div class="space-y-4">
              <div>
                <label class="block text-sm font-medium text-secondary mb-2">Property Type</label>
                <div class="radio-group">
                  <div class="radio-option" data-value="residential">
                    <input type="radio" name="propertyType" value="residential">
                    <div class="icon"><i class="fas fa-home"></i></div>
                    <div class="text-white font-medium">Residential</div>
                  </div>
                  <div class="radio-option" data-value="commercial">
                    <input type="radio" name="propertyType" value="commercial">
                    <div class="icon"><i class="fas fa-building"></i></div>
                    <div class="text-white font-medium">Commercial</div>
                  </div>
                  <div class="radio-option" data-value="industrial">
                    <input type="radio" name="propertyType" value="industrial">
                    <div class="icon"><i class="fas fa-industry"></i></div>
                    <div class="text-white font-medium">Industrial</div>
                  </div>
                </div>
              </div>
              
              <div>
                <label class="block text-sm font-medium text-secondary mb-2">Roof Type</label>
                <div class="radio-group">
                  <div class="radio-option" data-value="concrete">
                    <input type="radio" name="roofType" value="concrete">
                    <div class="icon"><i class="fas fa-square"></i></div>
                    <div class="text-white font-medium">Concrete/RCC</div>
                  </div>
                  <div class="radio-option" data-value="tile">
                    <input type="radio" name="roofType" value="tile">
                    <div class="icon"><i class="fas fa-th"></i></div>
                    <div class="text-white font-medium">Tile Roof</div>
                  </div>
                  <div class="radio-option" data-value="metal">
                    <input type="radio" name="roofType" value="metal">
                    <div class="icon"><i class="fas fa-grip-lines"></i></div>
                    <div class="text-white font-medium">Metal Sheet</div>
                  </div>
                  <div class="radio-option" data-value="mixed">
                    <input type="radio" name="roofType" value="mixed">
                    <div class="icon"><i class="fas fa-layer-group"></i></div>
                    <div class="text-white font-medium">Mixed</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Area Details -->
          <div class="form-group animate-slideInRight" style="animation-delay: 0.2s;">
            <h3 class="section-title">
              <i class="fas fa-ruler-combined"></i>
              Area Measurements
            </h3>
            
            <div class="space-y-4">
              <div>
                <label class="block text-sm font-medium text-secondary mb-2">Rooftop Area (sq ft)</label>
                <input type="number" id="rooftopArea" placeholder="Enter or calculate from map" 
                       class="glass-input w-full px-4 py-3 rounded-lg">
                <div class="area-calculator">
                  <p class="text-sm text-secondary mb-2">
                    <i class="fas fa-calculator mr-1"></i>
                    Quick Calculator
                  </p>
                  <div class="grid grid-cols-2 gap-2">
                    <input type="number" id="length" placeholder="Length (ft)" 
                           class="glass-input px-3 py-2 rounded text-sm">
                    <input type="number" id="width" placeholder="Width (ft)" 
                           class="glass-input px-3 py-2 rounded text-sm">
                  </div>
                  <button type="button" onclick="calculateArea()" 
                          class="glass-button w-full mt-2 py-2 rounded text-sm">
                    Calculate Area
                  </button>
                </div>
              </div>
              
              <div>
                <label class="block text-sm font-medium text-secondary mb-2">Available Open Area</label>
                <select id="openSpace" class="glass-input w-full px-4 py-3 rounded-lg">
                  <option value="">Select open area</option>
                  <option value="none">None (0 m²)</option>
                  <option value="small">Small (&lt;20 m²)</option>
                  <option value="medium">Medium (20–100 m²)</option>
                  <option value="large">Large (&gt;100 m²)</option>
                </select>
              </div>
              
              <div>
                <label class="block text-sm font-medium text-secondary mb-2">Budget Range (Optional)</label>
                <select id="budgetRange" class="glass-input w-full px-4 py-3 rounded-lg">
                  <option value="">Select budget range</option>
                  <option value="below-50k">Below ₹50,000</option>
                  <option value="50k-1l">₹50,000 - ₹1,00,000</option>
                  <option value="1l-2l">₹1,00,000 - ₹2,00,000</option>
                  <option value="2l-5l">₹2,00,000 - ₹5,00,000</option>
                  <option value="above-5l">Above ₹5,00,000</option>
                </select>
              </div>

              <div>
                <label class="block text-sm font-medium text-secondary mb-2">No. of Months of Water Storage Desired</label>
                <select id="storageMonths" class="glass-input w-full px-4 py-3 rounded-lg">
                  <option value="">Select duration</option>
                  <option value="1-2">1–2 Months</option>
                  <option value="3-4">3–4 Months</option>
                  <option value="5-6">5–6 Months</option>
                  <option value=">6">&gt;6 Months</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="nav-buttons">
        <button class="glass-button px-8 py-3 rounded-lg text-white font-medium" onclick="previousSection()">
          <i class="fas fa-arrow-left mr-2"></i>
          Back to Location
        </button>
        <button class="glass-button px-8 py-3 rounded-lg text-white font-medium" onclick="submitData()" id="submitData">
          Generate Assessment
          <i class="fas fa-chart-line ml-2"></i>
        </button>
      </div>
    </section>
  </main>
  
  <!-- Footer -->
  <footer class="relative z-10 container mx-auto px-4 py-6 text-center">
    <p class="text-muted text-sm">Supporting sustainable water management across India</p>
  </footer>

  <script src="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.js"></script>
  <script src="https://unpkg.com/@turf/turf@6/turf.min.js"></script>
  <script src="location-input.js" defer></script>
</body>
</html>